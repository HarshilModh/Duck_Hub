{{!-- views/reportDashboard.handlebars --}}
<div class="min-h-screen bg-stevensBg font-body text-stevensGray">
  <div class="max-w-5xl mx-auto px-6 py-10 space-y-12">

    <h1 class="text-3xl font-heading text-stevensMaroon text-center">
      Report Dashboard
    </h1>

    {{!-- FORUMS --}}
    <section>
      <h2 class="flex items-center text-2xl font-heading text-stevensMaroon mb-4">
        Forums
        {{#if forumReports.length}}
          <span class="ml-2 text-sm text-stevensGray">({{forumReports.length}})</span>
        {{/if}}
      </h2>
      <div class="space-y-6">
        {{#if forumReports.length}}
          {{#each forumReports as |report|}}
            {{#if report.forumId}}
              <a href="/report/forums/{{report.forumId._id}}" class="block transform hover:scale-[1.01] transition">
                <div class="bg-stevensWhite rounded-2xl shadow-md p-6 flex flex-col">
                  <h3 class="text-lg font-medium text-stevensMaroon mb-3">{{report.reason}}</h3>
                  <div class="mt-auto flex justify-between items-center text-sm text-stevensGray">
                    <span class="inline-flex items-center px-3 py-1 rounded-full
                      {{#if (eq report.status 'resolved')}}bg-green-100 text-green-800
                      {{else if (eq report.status 'under review')}}bg-yellow-100 text-yellow-800
                      {{else}}bg-red-100 text-red-800{{/if}}">
                      {{report.status}}
                    </span>
                    <span>{{formatDate report.createdAt}}</span>
                  </div>
                </div>
              </a>
            {{else}}
              <div class="bg-stevensWhite rounded-2xl shadow-md flex flex-col">
                <div class="p-6 opacity-50 cursor-not-allowed">
                  <h3 class="text-lg font-medium text-stevensMaroon mb-3">{{report.reason}}</h3>
                  <p class="text-sm text-red-600 italic mb-4">Forum post has been deleted.</p>
                  <div class="flex justify-between items-center text-sm text-stevensGray">
                    <span class="inline-flex items-center px-3 py-1 rounded-full
                      {{#if (eq report.status 'resolved')}}bg-green-100 text-green-800
                      {{else if (eq report.status 'under review')}}bg-yellow-100 text-yellow-800
                      {{else}}bg-red-100 text-red-800{{/if}}">
                      {{report.status}}
                    </span>
                    <span>{{formatDate report.createdAt}}</span>
                  </div>
                </div>
              </div>
            {{/if}}
          {{/each}}
        {{else}}
          <p class="text-center text-stevensGray">No forum reports.</p>
        {{/if}}
      </div>
    </section>

    {{!-- POLLS --}}
    <section>
      <h2 class="flex items-center text-2xl font-heading text-stevensMaroon mb-4">
        Polls
        {{#if pollReports.length}}
          <span class="ml-2 text-sm text-stevensGray">({{pollReports.length}})</span>
        {{/if}}
      </h2>
      <div class="space-y-6">
        {{#if pollReports.length}}
          {{#each pollReports as |report|}}
            {{#if report.pollId}}
              <a href="/report/polls/{{report.pollId._id}}" class="block transform hover:scale-[1.01] transition">
                <div class="bg-stevensWhite rounded-2xl shadow-md p-6 flex flex-col">
                  <h3 class="text-lg font-medium text-stevensMaroon mb-3">{{report.reason}}</h3>
                  <div class="mt-auto flex justify-between items-center text-sm text-stevensGray">
                    <span class="inline-flex items-center px-3 py-1 rounded-full
                      {{#if (eq report.status 'resolved')}}bg-green-100 text-green-800
                      {{else if (eq report.status 'under review')}}bg-yellow-100 text-yellow-800
                      {{else}}bg-red-100 text-red-800{{/if}}">
                      {{report.status}}
                    </span>
                    <span>{{formatDate report.createdAt}}</span>
                  </div>
                </div>
              </a>
            {{else}}
              <div class="bg-stevensWhite rounded-2xl shadow-md flex flex-col p-6 opacity-50 cursor-not-allowed">
                <h3 class="text-lg font-medium text-stevensMaroon mb-3">{{report.reason}}</h3>
                <p class="text-sm text-red-600 italic mb-4">Poll has been deleted.</p>
                <div class="flex justify-between items-center text-sm text-stevensGray">
                  <span class="inline-flex items-center px-3 py-1 rounded-full
                    {{#if (eq report.status 'resolved')}}bg-green-100 text-green-800
                    {{else if (eq report.status 'under review')}}bg-yellow-100 text-yellow-800
                    {{else}}bg-red-100 text-red-800{{/if}}">
                    {{report.status}}
                  </span>
                  <span>{{formatDate report.createdAt}}</span>
                </div>
              </div>
            {{/if}}
          {{/each}}
        {{else}}
          <p class="text-center text-stevensGray">No poll reports.</p>
        {{/if}}
      </div>
    </section>

    {{!-- REVIEWS --}}
    <section>
      <h2 class="flex items-center text-2xl font-heading text-stevensMaroon mb-4">
        Reviews
        {{#if reviewReports.length}}
          <span class="ml-2 text-sm text-stevensGray">({{reviewReports.length}})</span>
        {{/if}}
      </h2>
      <div class="space-y-6">
        {{#if reviewReports.length}}
          {{#each reviewReports as |report|}}
            {{#if report.reviewId}}
              <a href="/report/reviews/{{report.reviewId._id}}" class="block transform hover:scale-[1.01] transition">
                <div class="bg-stevensWhite rounded-2xl shadow-md p-6 flex flex-col">
                  <h3 class="text-lg font-medium text-stevensMaroon mb-4">{{report.reason}}</h3>
                  <div class="grid grid-cols-2 gap-6 text-sm text-stevensGray mb-4">
                    <div>
                      <p class="font-medium">Overall Rating</p>
                      <p class="text-lg">{{report.reviewId.overallRating}} / 5</p>
                    </div>
                    <div>
                      <p class="font-medium">Difficulty</p>
                      <p class="text-lg">{{report.reviewId.difficultyRating}} / 3</p>
                    </div>
                  </div>
                  <div class="mt-auto flex justify-between items-center text-sm text-stevensGray">
                    <span class="inline-flex items-center px-3 py-1 rounded-full
                      {{#if (eq report.status 'resolved')}}bg-green-100 text-green-800
                      {{else if (eq report.status 'under review')}}bg-yellow-100 text-yellow-800
                      {{else}}bg-red-100 text-red-800{{/if}}">
                      {{report.status}}
                    </span>
                    <span>{{formatDate report.createdAt}}</span>
                  </div>
                </div>
              </a>
            {{else}}
              <div class="bg-stevensWhite rounded-2xl shadow-md flex flex-col p-6 opacity-50 cursor-not-allowed">
                <h3 class="text-lg font-medium text-stevensMaroon mb-4">{{report.reason}}</h3>
                <p class="text-sm text-red-600 italic mb-4">Review has been deleted.</p>
                <div class="flex justify-between items-center text-sm text-stevensGray">
                  <span class="inline-flex items-center px-3 py-1 rounded-full
                    {{#if (eq report.status 'resolved')}}bg-green-100 text-green-800
                    {{else if (eq report.status 'under review')}}bg-yellow-100 text-yellow-800
                    {{else}}bg-red-100 text-red-800{{/if}}">
                    {{report.status}}
                  </span>
                  <span>{{formatDate report.createdAt}}</span>
                </div>
              </div>
            {{/if}}
          {{/each}}
        {{else}}
          <p class="text-center text-stevensGray">No review reports.</p>
        {{/if}}
      </div>
    </section>

    {{!-- RESOURCES --}}
    <section>
      <h2 class="flex items-center text-2xl font-heading text-stevensMaroon mb-4">
        Resources
        {{#if academicResourceReports.length}}
          <span class="ml-2 text-sm text-stevensGray">({{academicResourceReports.length}})</span>
        {{/if}}
      </h2>
      <div class="space-y-6">
        {{#if academicResourceReports.length}}
          {{#each academicResourceReports as |report|}}
            {{#if report.academicResourceId}}
              <a href="/report/academicResources/{{report.academicResourceId._id}}" class="block transform hover:scale-[1.01] transition">
                <div class="bg-stevensWhite rounded-2xl shadow-md p-6 flex flex-col">
                  <h3 class="text-lg font-medium text-stevensMaroon mb-3">{{report.reason}}</h3>
                  <div class="mt-auto flex justify-between items-center text-sm text-stevensGray">
                    <span class="inline-flex items-center px-3 py-1 rounded-full
                      {{#if (eq report.status 'resolved')}}bg-green-100 text-green-800
                      {{else if (eq report.status 'under review')}}bg-yellow-100 text-yellow-800
                      {{else}}bg-red-100 text-red-800{{/if}}">
                      {{report.status}}
                    </span>
                    <span>{{formatDate report.createdAt}}</span>
                  </div>
                </div>
              </a>
            {{else}}
              <div class="bg-stevensWhite rounded-2xl shadow-md flex flex-col p-6 opacity-50 cursor-not-allowed">
                <h3 class="text-lg font-medium text-stevensMaroon mb-3">{{report.reason}}</h3>
                <p class="text-sm text-red-600 italic mb-4">Resource has been deleted.</p>
                <div class="flex justify-between items-center text-sm text-stevensGray">
                  <span class="inline-flex items-center px-3 py-1 rounded-full
                    {{#if (eq report.status 'resolved')}}bg-green-100 text-green-800
                    {{else if (eq report.status 'under review')}}bg-yellow-100 text-yellow-800
                    {{else}}bg-red-100 text-red-800{{/if}}">
                    {{report.status}}  
                  </span>
                  <span>{{formatDate report.createdAt}}</span>
                </div>
              </div>
            {{/if}}
          {{/each}}
        {{else}}
          <p class="text-center text-stevensGray">No resource reports.</p>
        {{/if}}
      </div>
    </section>

  </div>
</div>
