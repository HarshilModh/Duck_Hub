<div class="forum-header-bar">
  <form action="/forums" method="get" class="controls-form">

    <!-- SEARCH WRAPPER -->
    <div class="search-wrapper">
      <div class="search-section">
        <input
          type="text"
          name="search"
          id="searchInput"
          placeholder="Search posts..."
          value="{{search}}"
        />
        <button type="submit" class="search-button">üîç</button>
      </div>
    </div>

    <!-- FILTER WRAPPER (Forums vs Polls) -->
    <div class="filter-wrapper">
      <div class="filter-section">
        <button type="submit" name="type" value="forums" class="toggle-button">
          Forums
        </button>
        <button type="submit" name="type" value="polls" class="toggle-button">
          Polls
        </button>
      </div>
    </div>

    <!-- SORT WRAPPER -->
    <div class="sort-wrapper">
      <div class="sort-section">
        <label for="sortSelect">Sort by:</label>
        <select name="sort" id="sortSelect" onchange="this.form.submit()">
          <option value="createdAt">Latest</option>
          <option value="upVotes">Most UpVoted</option>
          <option value="downVotes">Most DownVoted</option>
        </select>
        <select name="order" id="orderSelect" onchange="this.form.submit()">
          <option value="desc">Desc</option>
          <option value="asc">Asc</option>
        </select>
      </div>
    </div>

  </form>
</div>

<div class="section-heading-bar">
  <h2 id="sectionHeading">Forum Posts</h2>

  <a href="/forums/create" class="create-post-button">Create Post</a>
</div>

<!-- List of forum posts -->
<div class="forum-posts-list">
  {{#each forumPosts}}
    <div class="forum-post-card">
      <!-- Forum Title -->
      <h3 class="forum-title">{{title}}</h3>

      <!-- Posted By (firstName_lastName) -->
      <p class="forum-posted-by">
        Posted by:
        {{userId.firstName}}_{{userId.lastName}}
      </p>

      <!-- Content -->
      <p class="forum-content">{{content}}</p>

      {{! NEED TO IMPLEMENT THE TAGS PART }}

      <!-- If images exist -->
      {{#if imageURLs.length}}
        <div class="forum-images">
          {{#each imageURLs}}
            <img src="{{this}}" alt="Forum Image" class="forum-image" />
          {{/each}}
        </div>
      {{/if}}

      <!-- Upvote, Downvote, Comment buttons -->
      <div class="forum-buttons">
        <button class="vote-button upvote-button" data-id="{{_id}}">
          <img
            src="/public/images/icons/upVote.png"
            alt="Upvote"
            class="vote-icon"
          />
          <span>{{upVotes}}</span>
        </button>
        <button class="vote-button downvote-button" data-id="{{_id}}">
          <img
            src="/public/images/icons/downVote.png"
            alt="Downvote"
            class="vote-icon"
          />
          <span>{{downVotes}}</span>
        </button>
        <button class="comment-button" data-id="{{_id}}">
          üí¨ Comment
        </button>
      </div>
    </div>
  {{/each}}
</div>

<script>
  const loggedInUserId = "{{loggedUserId}}";
</script>
<script src="/public/js/forumLanding.js"></script>