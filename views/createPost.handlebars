<div class="create-post-page">
  <h2>Create a New Post</h2>

  <div class="post-type-selection">
    <button id="createForumBtn" type="button">Create Forum</button>
    <button id="createPollBtn" type="button">Create Poll</button>
  </div>
  <div id="forumFormContainer" style="display: none;">
    <form
      id="forumForm"
      action="/forums"
      method="POST"
      enctype="multipart/form-data"
    >
      <input type="hidden" id="userId" name="userId" value="{{loggedUserId}}" />

      <div class="form-group">
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" />
        <div class="error-message"></div>
      </div>

      <div class="form-group">
        <label for="content">Content:</label>
        <textarea id="content" name="content"></textarea>
        <div class="error-message"></div>
      </div>

      <div class="form-group">
        <label for="tags">Select Tags:</label>
        <select id="tags" name="tags[]" multiple>
          <option value="" disabled>Select one or more tags</option>
          {{#each tags}}
            <option value="{{this._id}}">{{this.name}}</option>
          {{/each}}
        </select>
        <div class="error-message"></div>
      </div>

      <div class="form-group">
        <label for="images">Upload Images (max 5):</label>
        <input
          type="file"
          id="images"
          name="images"
          accept="image/*"
          multiple
        />
        <div class="error-message"></div>
      </div>

      <button type="submit" class="submit-post-button">
        Create Forum
      </button>
    </form>
  </div>
  <div id="pollFormContainer" style="display: none;">
    <form
      id="pollForm"
      action="/polls"
      method="POST"
      enctype="multipart/form-data"
    >
      <input type="hidden" name="createdBy" value="{{loggedUserId}}" />

      <div class="form-group">
        <label for="question">Question:</label>
        <input id="question" name="question" type="text" />
        <div class="error-message"></div>
      </div>

      <div id="options-wrapper" class="form-group">
        <label>Options:</label>
        <div class="error-message"></div>
        <div class="option-row">
          <input name="options[]" type="text" placeholder="Option 1" />
          <button type="button" class="remove-option">✕</button>
        </div>
        <div class="option-row">
          <input name="options[]" type="text" placeholder="Option 2" />
          <button type="button" class="remove-option">✕</button>
        </div>
        <button type="button" id="add-option" class="add-option-button">
          + Add option
        </button>
      </div>

      <div class="form-group">
        <label for="pollTags">Select Tags:</label>
        <select id="pollTags" name="tags[]" multiple>
          <option value="" disabled>Select one or more tags</option>
          {{#each tags}}
            <option value="{{this._id}}">{{this.name}}</option>
          {{/each}}
        </select>
        <div class="error-message"></div>
      </div>

      <div class="form-group">
        <label for="pollImages">Upload Images:</label>
        <input
          id="pollImages"
          name="images"
          type="file"
          accept="image/*"
          multiple
        />
        <div class="error-message"></div>
      </div>

      <button type="submit" class="submit-post-button">Create Poll</button>
    </form>
  </div>
  <div class="form-group">
    <button type="button" id="addTagBtn">Add New Tag</button>
  </div>

  <div id="newTagDiv" style="display: none;">
    <div class="form-group">
      <input type="text" id="newTagName" placeholder="Enter new tag name" />
      <div class="error-message"></div>
    </div>
    <button type="button" id="saveNewTag">Save</button>
  </div>
</div>

<script src="/public/js/createPost.js"></script>