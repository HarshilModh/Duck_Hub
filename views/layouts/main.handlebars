<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{title}}</title>

  <!-- Rubik font -->
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700&display=swap" rel="stylesheet" />

  <!-- Tailwind Play CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            stevensMaroon: '#9D1535',
            stevensGray:   '#949594',
            stevensWhite:  '#FFFFFE',
            stevensBg:     '#F1F5F9'
          },
          fontFamily: {
            body:    ['Rubik','sans-serif'],
            heading: ['Rubik','sans-serif']
          }
        }
      }
    };
  </script>
</head>

<body class="min-h-screen bg-stevensBg font-body text-stevensMaroon">
  {{> nav}}

  <main class="max-w-6xl mx-auto px-6 py-10">
    {{{body}}}
  </main>

  <!-- Comment Overlay -->
  <div id="commentOverlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-xl shadow-lg max-w-6xl w-full flex p-6 relative">
      <button id="closeOverlay" class="absolute top-4 right-4 text-gray-500 hover:text-red-500 text-2xl font-bold">&times;</button>

      <div id="overlayPostContent" class="w-2/3 pr-6 border-r border-gray-200"></div>

      <div id="overlayComments" class="w-1/3 pl-6 overflow-y-auto max-h-[80vh]">
        <div id="addCommentSection" class="mb-6 p-4 bg-white rounded-lg shadow border border-gray-200">
          <h3 class="text-lg font-semibold text-stevensMaroon mb-3">Add a Comment</h3>
          <form id="commentForm" class="space-y-3">
            <input type="hidden" id="commentForumId" name="forumId" />
            <input type="hidden" id="commentUserId" name="userId" value="67fd9a1593edbb521ccbfab2" />

            <textarea id="commentContent" name="content" rows="3" class="w-full border border-gray-300 rounded p-2 text-sm" placeholder="Write your comment..." required></textarea>

            <input type="text" id="commentImage" name="imageURLs" class="w-full border border-gray-300 rounded p-2 text-sm" placeholder="Image URL (optional)" />

            <button type="submit" class="bg-stevensMaroon text-white px-4 py-2 rounded hover:bg-red-700 transition">Post Comment</button>
          </form>
        </div>

        <div id="commentList"></div>
      </div>
    </div>
  </div>

  <footer class="text-center text-stevensGray py-6">
    Â© {{year}} Stevens Institute of Technology
  </footer>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const toast = {{{json toast}}};
      if (toast && toast.message) {
        Toastify({
          text: toast.message,
          duration: 4000,
          gravity: 'top',
          position: 'right',
          backgroundColor: toast.type === 'error' ? '#EF4444' : '#22C55E',
          close: true
        }).showToast();
      }
    });
  </script>
  <script src="/js/comments.js"></script>
</body>
</html>
